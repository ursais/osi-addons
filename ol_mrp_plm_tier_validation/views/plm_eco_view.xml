<odoo>

    <record id="ol_mrp_eco_tier_validation_eco_search" model="ir.ui.view">
        <field name="name">mrp.eco.tier.validation.inherit.search</field>
        <field name="model">mrp.eco</field>
        <field name="inherit_id" ref="mrp_plm.mrp_eco_search" />
        <field name="arch" type="xml">
            <filter name="archived" position="after">
                <separator />
                <filter
                    name="needs_review"
                    string="Needs my Review"
                    domain="[('reviewer_ids','in',uid), ('state', 'not in', ['done', 'cancel','to approve'])]"
                    help="My ECOs to review"
                />
                <filter
                    name="tier_validated"
                    string="Validated"
                    domain="[('validated', '=', True)]"
                    help="ECOs validated and ready to be confirmed"
                />
            </filter>
        </field>
    </record>

    <record id="ol_mrp_eco_tier_validation_eco_tree" model="ir.ui.view">
        <field name="name">mrp.eco.tier.validation.inherit.tree</field>
        <field name="model">mrp.eco</field>
        <field name="inherit_id" ref="mrp_plm.mrp_eco_view_tree" />
        <field name="arch" type="xml">
            <tree position="inside">
                <field
                    name="validation_status"
                    widget="badge"
                    optional="hide"
                    decoration-info="validation_status == 'pending'"
                    decoration-danger="validation_status == 'rejected'"
                    decoration-success="validation_status == 'validated'"
                />
            </tree>
        </field>
    </record>

    <record
        id="mrp_eco_view_form_inherit_ol_mrp_eco_tier_validation"
        model="ir.ui.view"
    >
        <field name="name">mrp.eco.tier.validation.inherit.form</field>
        <field name="model">mrp.eco</field>
        <field name="inherit_id" ref="mrp_plm.mrp_eco_view_form" />
        <field name="arch" type="xml">
            <field name="stage_id" position="attributes">
                <attribute name="readonly">True</attribute>
                <attribute name="force_save">1</attribute>
            </field>
            <field name="stage_id" position="after">
                <field name="prev_stage_id" invisible="1" />
                <field name="next_stage_id" invisible="1" />
                <button
                    string="Prev"
                    name="action_move_to_prev_stage"
                    type="object"
                    class="btn_secondary"
                    invisible="not prev_stage_id or state in ('done', 'confirmed', 'cancel') or not stage_id"
                    confirm="Moving to the previous stage will reset any approvals, continue?"
                />
                <button
                    string="Next"
                    name="action_move_to_next_stage"
                    type="object"
                    class="oe_highlight"
                    invisible="not next_stage_id or state in ('done', 'confirmed', 'cancel') or not stage_id"
                />
            </field>
            <field name="approval_ids" position="before">
                <separator string="Standard Approvals"/>
            </field>
            <field name="approval_ids" position="after">
                <separator string="Tier Approval History"/>
                <field name="tier_review_history_ids" nolabel="1" readonly="1">
                    <tree>
                        <field name="status" />
                        <field name="requested_by" />
                        <field name="name" />
                        <field name="eco_stage_id" />
                        <field name="todo_by" />
                        <field name="done_by" />
                        <field name="reviewed_date" />
                        <field name="comment" />
                    </tree>
                </field>
            </field>
        </field>
    </record>

    <record id="ol_mrp_eco_tier_validation_eco_kanban" model="ir.ui.view">
        <field name="name">mrp.eco.tier.validation.inherit.kanban</field>
        <field name="model">mrp.eco</field>
        <field name="inherit_id" ref="mrp_plm.mrp_eco_kanban" />
        <field name="arch" type="xml">
            <field name="stage_id" position="attributes">
                <attribute name="readonly">1</attribute>
            </field>
        </field>
    </record>

</odoo>
